!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("immutable")):"function"==typeof define&&define.amd?define(["react","immutable"],t):"object"==typeof exports?exports.ReactQueryBuilder=t(require("react"),require("immutable")):e.ReactQueryBuilder=t(e.React,e.Immutable)}(this,function(e,t){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={exports:{},id:n,loaded:!1};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=n(r(1)),o=n(r(2)),s=n(r(3)),a=n(r(4)),u=n(r(5)),c=n(r(6)),p=n(r(7)),l=n(r(8)),f=n(r(9)),h=n(r(10));e.exports={Builder:i,TreeStore:a,Dispatcher:u,GroupConstants:c,RuleConstants:p,GroupActions:l,RuleActions:f,TextWidget:o,SelectWidget:s,getQueryString:h}},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function d(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:d(i,t,r)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0===o?void 0:o.call(r)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=n(r(11)),p=n(r(12)),l=n(r(13)),f=n(r(4)),h=function(e){function t(e){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={tree:f.getTree()}}return s(t,e),i(t,{componentDidMount:{value:function(){f.addChangeListener(this.handleChange.bind(this))}},componentWillUnmount:{value:function(){f.removeChangeListener(this.handleChange.bind(this))}},handleChange:{value:function(){this.setState({tree:f.getTree()})}},render:{value:function(){if(!this.state.tree)return null;var e={id:this.state.tree.get("id"),children:this.state.tree.get("children"),ancestors:new p.List,type:this.state.tree.get("type"),properties:this.state.tree.get("properties"),config:this.props.config};return c.createElement("div",{className:"query-builder"},c.createElement(l,u({key:e.id},e)))}}}),t}(c.Component);h.propTypes={config:c.PropTypes.object.isRequired},e.exports=h},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=n(r(11)),u=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{handleChange:{value:function(){var e=a.findDOMNode(this.refs.text);this.props.setValue(e.value)}},render:{value:function(){return a.createElement("input",{type:"textfield",ref:"text",value:this.props.value,onChange:this.handleChange.bind(this)})}}}),t}(a.Component);e.exports=u},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=n(r(11)),u=n(r(17)),c=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{handleChange:{value:function(){var e=a.findDOMNode(this.refs.select);this.props.setValue(e.value)}},render:{value:function(){var e=u(this.props.field.options,function(e,t){return a.createElement("option",{key:t,value:t},e)});return a.createElement("select",{ref:"select",value:this.props.value,onChange:this.handleChange.bind(this)},e)}}}),t}(a.Component);e.exports=c},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0})},o=r(14).EventEmitter,s=n(r(12)),a=n(r(5)),u=n(r(6)),c=n(r(7)),p=n(r(16)),l=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,r="x"==e?t:3&t|8;return r.toString(16)})},f=s.Map({type:"group",id:l(),children:new s.OrderedMap,properties:s.Map({conjunction:"and"})}),h=function(e){var t=function(){return e.apply(this,arguments)};return t.toString=function(){return e.toString()},t}(function(e,t){var r=this;if(t=t||new s.List,f.getIn(t.push("id"))==e)return t;if(f.hasIn(t,"children")){t=t.push("children");var n=f.getIn(t);if(n&&n.size){var i=function(){var i=void 0;return n.forEach(function(r,n){return i=h(e,t.push(n)),"undefined"==typeof i},r),{v:i}}();if("object"==typeof i)return i.v}}return void 0}),d=function(e){var t=arguments;return e.interpose("children").withMutations(function(e){return e.skip(1),e.push.apply(e,Array.prototype.slice.call(t,1)),e})},v=function(e,t){f=f.setIn(d(e,"properties","conjunction"),t)},y=function(e,t){f=f.mergeIn(d(e,"children"),new s.OrderedMap(i({},t.get("id"),t)))},g=function(e){f=f.deleteIn(d(e))},m=function(e,t){f=f.deleteIn(d(e,"properties","operator")).setIn(d(e,"properties","field"),t).setIn(d(e,"properties","options"),new s.Map).setIn(d(e,"properties","value"),new s.List)},b=function(e,t){f=f.setIn(d(e,"properties","operator"),t).setIn(d(e,"properties","options"),new s.Map).setIn(d(e,"properties","value"),new s.List)},_=function(e,t,r){f=f.setIn(d(e,"properties","value",t+""),r)},E=function(e,t,r){f=f.setIn(d(e,"properties","options",t),r)},w=p({},o.prototype,{getTree:function(){return f},addChangeListener:function(e){this.on("change",e)},removeChangeListener:function(e){this.removeListener("change",e)}});a.register(function(e){switch(e.actionType){case u.SET_CONJUNCTION:v(e.path,e.conjunction),w.emit("change");break;case u.ADD_GROUP:y(e.path,s.Map({type:"group",id:l(),properties:s.Map(e.group)})),w.emit("change");break;case u.REMOVE_GROUP:g(e.path),w.emit("change");break;case c.ADD_RULE:y(e.path,s.Map({type:"rule",id:l(),properties:s.Map(e.rule)})),w.emit("change");break;case c.REMOVE_RULE:g(e.path),w.emit("change");break;case c.SET_FIELD:m(e.path,e.field),w.emit("change");break;case c.SET_OPERATOR:b(e.path,e.operator),w.emit("change");break;case c.SET_DELTA_VALUE:_(e.path,e.delta,e.value),w.emit("change");break;case c.SET_OPTION:E(e.path,e.name,e.value),w.emit("change")}}),e.exports=w},function(e,t,r){"use strict";var n=r(15).Dispatcher;e.exports=new n},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=n(r(20));e.exports=i({ADD_GROUP:null,REMOVE_GROUP:null,SET_CONJUNCTION:null})},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=n(r(20));e.exports=i({ADD_RULE:null,REMOVE_RULE:null,SET_FIELD:null,SET_OPERATOR:null,SET_OPTION:null,SET_DELTA_VALUE:null})},function(e,t,r){"use strict";{var n=function(e){return e&&e.__esModule?e["default"]:e},i=(n(r(11)),n(r(5))),o=n(r(6));n(r(12))}e.exports={addGroup:function(e,t){i.dispatch({actionType:o.ADD_GROUP,path:e,group:t})},removeGroup:function(e){i.dispatch({actionType:o.REMOVE_GROUP,path:e})},setConjunction:function(e,t){i.dispatch({actionType:o.SET_CONJUNCTION,path:e,conjunction:t})}}},function(e,t,r){"use strict";{var n=function(e){return e&&e.__esModule?e["default"]:e},i=(n(r(11)),n(r(5))),o=n(r(7));n(r(12))}e.exports={addRule:function(e,t){i.dispatch({actionType:o.ADD_RULE,path:e,rule:t})},removeRule:function(e){i.dispatch({actionType:o.REMOVE_RULE,path:e})},setField:function(e,t){i.dispatch({actionType:o.SET_FIELD,path:e,field:t})},setOperator:function(e,t){i.dispatch({actionType:o.SET_OPERATOR,path:e,operator:t})},setDeltaValue:function(e,t,r){i.dispatch({actionType:o.SET_DELTA_VALUE,path:e,delta:t,value:r})},setOption:function(e,t,r){i.dispatch({actionType:o.SET_OPTION,path:e,name:t,value:r})}}},function(e){"use strict";var t=function(e){var t=function(){return e.apply(this,arguments)};return t.toString=function(){return e.toString()},t}(function(e,r){var n=e.get("type"),i=e.get("properties"),o=e.get("children");if("rule"==n){var s=function(){if(!i.has("field")||!i.has("operator"))return{v:void 0};var e=i.get("value"),t=r.fields[i.get("field")],n=r.operators[i.get("operator")],o=i.get("options");return 0!==(n.cardinality||1)&&!function(){var n=r.widgets[t.widget];e=e.map(function(e){return n.value(e,r)})}(),{v:n.value(e,t,o,n,r)}}();if("object"==typeof s)return s.v}if("group"==n&&o&&o.size){var a=o.map(function(e){return t(e,r)});a=a.filter(function(e){return"undefined"!=typeof e});var u=i.get("conjunction");return u=r.conjunctions[u],u.value(a,u)}return void 0});e.exports=function(e,r){return t(e,r)}},function(t){t.exports=e},function(e){e.exports=t},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function y(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var i=Object.getPrototypeOf(e);return null===i?void 0:y(i,t,r)}if("value"in n&&n.writable)return n.value;var o=n.get;return void 0===o?void 0:o.call(r)},s=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},a=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},c=n(r(11)),p=n(r(12)),l=n(r(18)),f=n(r(19)),h=n(r(16)),d={group:f,rule:l},v=function(e){function t(e){a(this,t),o(Object.getPrototypeOf(t.prototype),"constructor",this).call(this,e),this.state={path:e.ancestors.push(e.id)}}return s(t,e),i(t,{componentWillReceiveProps:{value:function(e){p.is(this.props.ancestors,e.ancestors)||this.setState({path:this.props.ancestors.push(this.props.id)})}},render:{value:function(){var e=this.props.children?this.props.children.map(function(e){var r={config:this.props.config,ancestors:this.state.path,id:e.get("id"),children:e.get("children"),type:e.get("type"),properties:e.get("properties")};return c.createElement(t,u({key:r.id},r))},this).toList():null,r=d[this.props.type],n=h({},this.props.properties.toObject(),{config:this.props.config,id:this.props.id,path:this.state.path,children:e});return c.createElement(r,n)}}}),t}(c.Component);v.propTypes={config:c.PropTypes.object.isRequired,id:c.PropTypes.string.isRequired,type:c.PropTypes.string.isRequired,ancestors:c.PropTypes.instanceOf(p.List).isRequired,properties:c.PropTypes.instanceOf(p.Map).isRequired,children:c.PropTypes.instanceOf(p.OrderedMap)},e.exports=v},function(e){"use strict";function t(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function n(e){return"number"==typeof e}function i(e){return"object"==typeof e&&null!==e}function o(e){return void 0===e}e.exports=t,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._maxListeners=void 0,t.defaultMaxListeners=10,t.prototype.setMaxListeners=function(e){if(!n(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},t.prototype.emit=function(e){var t,n,s,a,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],o(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,a=new Array(s-1),u=1;s>u;u++)a[u-1]=arguments[u];n.apply(this,a)}else if(i(n)){for(s=arguments.length,a=new Array(s-1),u=1;s>u;u++)a[u-1]=arguments[u];for(c=n.slice(),s=c.length,u=0;s>u;u++)c[u].apply(this,a)}return!0},t.prototype.addListener=function(e,n){var s;if(!r(n))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(n.listener)?n.listener:n),this._events[e]?i(this._events[e])?this._events[e].push(n):this._events[e]=[this._events[e],n]:this._events[e]=n,i(this._events[e])&&!this._events[e].warned){var s;s=o(this._maxListeners)?t.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},t.prototype.on=t.prototype.addListener,t.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},t.prototype.removeListener=function(e,t){var n,o,s,a;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],s=n.length,o=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(i(n)){for(a=s;a-->0;)if(n[a]===t||n[a].listener&&n[a].listener===t){o=a;break}if(0>o)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(o,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},t.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},t.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},t.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},function(e,t,r){"use strict";e.exports.Dispatcher=r(21)},function(e){"use strict";function t(e){if(null==e)throw new TypeError("Object.assign target cannot be null or undefined");for(var t=Object(e),r=Object.prototype.hasOwnProperty,n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i){var o=Object(i);for(var s in o)r.call(o,s)&&(t[s]=o[s])}}return t}e.exports=t},function(e,t,r){"use strict";function n(e,t,r){var n=a(e)?i:s;return t=o(t,r,3),n(e,t)}var i=r(25),o=r(26),s=r(27),a=r(28);e.exports=n},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=n(r(11)),c=n(r(12)),p=n(r(9)),l=n(r(22)),f=n(r(23)),h=(n(r(16)),n(r(17))),d=(n(r(24)),function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{removeRule:{value:function(){p.removeRule(this.props.path)}},handleFieldSelect:{value:function(){var e=u.findDOMNode(this.refs.field);p.setField(this.props.path,e.value)}},handleOperatorSelect:{value:function(){var e=u.findDOMNode(this.refs.operator);p.setOperator(this.props.path,e.value)}},render:{value:function(){var e=[],t=this.props.config.fields,r=this.props.field&&t[this.props.field]||void 0,n={};for(var i in this.props.config.operators)this.props.config.operators.hasOwnProperty(i)&&r&&-1!==r.operators.indexOf(i)&&(n[i]=this.props.config.operators[i]);var o=r&&this.props.operator&&n[this.props.operator]||void 0;if(Object.keys(t).length){var s=h(t,function(e,t){return u.createElement("option",{key:t,value:t},e.label)});"undefined"==typeof r&&s.unshift(u.createElement("option",{key:":empty:",value:":empty:"})),e.push(u.createElement("div",{key:"field",className:"rule--field"},u.createElement("label",null,"Field"),u.createElement("select",{ref:"field",value:this.props.field||":empty:",onChange:this.handleFieldSelect.bind(this)},s)))}if(Object.keys(n).length){var s=h(n,function(e,t){return u.createElement("option",{key:t,value:t},e.label)});"undefined"==typeof o&&s.unshift(u.createElement("option",{key:":empty:",value:":empty:"})),e.push(u.createElement("div",{key:"operator",className:"rule--operator"},u.createElement("label",null,"Operator"),u.createElement("select",{ref:"operator",value:this.props.operator||":empty:",onChange:this.handleOperatorSelect.bind(this)},s)))}if(r&&o){var c="string"==typeof r.widget?this.props.config.widgets[r.widget]:r.widget,p=o.cardinality||1,d={config:this.props.config,path:this.props.path,id:this.props.id,field:r};e.push(u.createElement(f,a({key:"options"},d,{options:this.props.options,operator:o}))),e.push(u.createElement(l,a({key:"values"},d,{value:this.props.value,cardinality:p,widget:c})))}return u.createElement("div",{className:"rule"},u.createElement("div",{className:"rule--header"},u.createElement("div",{className:"rule--actions"},u.createElement("a",{href:"#",className:"action action--DELETE",onClick:this.removeRule.bind(this)},"Delete"))),u.createElement("div",{className:"rule--body"},e))}}}),t}(u.Component));d.propTypes={config:u.PropTypes.object.isRequired,id:u.PropTypes.string.isRequired,path:u.PropTypes.instanceOf(c.List).isRequired},e.exports=d},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=n(r(11)),u=n(r(12)),c=n(r(8)),p=n(r(9)),l=n(r(17)),f=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{setConjunction:{value:function(e){c.setConjunction(this.props.path,e.target.value,this.props.config)}},addGroup:{value:function(){c.addGroup(this.props.path,{conjunction:this.props.config.defaults.conjunction},this.props.config)}},removeGroup:{value:function(){c.removeGroup(this.props.path,this.props.config)}},addRule:{value:function(){p.addRule(this.props.path,{value:new u.List,options:new u.Map},this.props.config)}},render:{value:function(){var e="conjunction["+this.props.id+"]",t=l(this.props.config.conjunctions,function(t,r){var n=r==this.props.conjunction,i=n?"active":"inactive",o="conjunction-"+this.props.id+"-"+r;return a.createElement("div",{key:r,className:"conjunction conjunction--"+r.toUpperCase(),"data-state":i},a.createElement("label",{htmlFor:o},t.label),a.createElement("input",{id:o,type:"radio",name:e,value:r,checked:n,onChange:this.setConjunction.bind(this)}))},this);return a.createElement("div",{className:"group"},a.createElement("div",{className:"group--header"},a.createElement("div",{className:"group--conjunctions"},t),a.createElement("div",{className:"group--actions"},a.createElement("a",{href:"#",className:"action action--ADD-GROUP",onClick:this.addGroup.bind(this)},"Add group"),a.createElement("a",{href:"#",className:"action action--ADD-RULE",onClick:this.addRule.bind(this)},"Add rule"),a.createElement("a",{href:"#",className:"action action--DELETE",onClick:this.removeGroup.bind(this)},"Delete"))),a.createElement("div",{className:"group--children"},this.props.children))}}}),t}(a.Component);f.propTypes={config:a.PropTypes.object.isRequired,id:a.PropTypes.string.isRequired,path:a.PropTypes.instanceOf(u.List).isRequired},e.exports=f},function(e,t,r){"use strict";var n=r(29),i=function(e){var t,r={};n(e instanceof Object&&!Array.isArray(e));for(t in e)e.hasOwnProperty(t)&&(r[t]=t);return r};e.exports=i},function(e,t,r){"use strict";function n(){this.$Dispatcher_callbacks={},this.$Dispatcher_isPending={},this.$Dispatcher_isHandled={},this.$Dispatcher_isDispatching=!1,this.$Dispatcher_pendingPayload=null}var i=r(32),o=1,s="ID_";n.prototype.register=function(e){var t=s+o++;return this.$Dispatcher_callbacks[t]=e,t},n.prototype.unregister=function(e){i(this.$Dispatcher_callbacks[e],"Dispatcher.unregister(...): `%s` does not map to a registered callback.",e),delete this.$Dispatcher_callbacks[e]},n.prototype.waitFor=function(e){i(this.$Dispatcher_isDispatching,"Dispatcher.waitFor(...): Must be invoked while dispatching.");for(var t=0;t<e.length;t++){var r=e[t];this.$Dispatcher_isPending[r]?i(this.$Dispatcher_isHandled[r],"Dispatcher.waitFor(...): Circular dependency detected while waiting for `%s`.",r):(i(this.$Dispatcher_callbacks[r],"Dispatcher.waitFor(...): `%s` does not map to a registered callback.",r),this.$Dispatcher_invokeCallback(r))}},n.prototype.dispatch=function(e){i(!this.$Dispatcher_isDispatching,"Dispatch.dispatch(...): Cannot dispatch in the middle of a dispatch."),this.$Dispatcher_startDispatching(e);try{for(var t in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[t]||this.$Dispatcher_invokeCallback(t)}finally{this.$Dispatcher_stopDispatching()}},n.prototype.isDispatching=function(){return this.$Dispatcher_isDispatching},n.prototype.$Dispatcher_invokeCallback=function(e){this.$Dispatcher_isPending[e]=!0,this.$Dispatcher_callbacks[e](this.$Dispatcher_pendingPayload),this.$Dispatcher_isHandled[e]=!0},n.prototype.$Dispatcher_startDispatching=function(e){for(var t in this.$Dispatcher_callbacks)this.$Dispatcher_isPending[t]=!1,this.$Dispatcher_isHandled[t]=!1;this.$Dispatcher_pendingPayload=e,this.$Dispatcher_isDispatching=!0},n.prototype.$Dispatcher_stopDispatching=function(){this.$Dispatcher_pendingPayload=null,this.$Dispatcher_isDispatching=!1},e.exports=n},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=n(r(11)),u=n(r(12)),c=n(r(9)),p=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{render:{value:function(){var e=this;if(0===this.props.cardinality)return null;var t=this.props.widget.name.toUpperCase();if("undefined"==typeof this.props.widget.behavior){for(var r=[],n=0;n<this.props.cardinality;n++)!function(n){var i=a.createElement(e.props.widget.component,{key:n,definition:e.props.widget,field:e.props.field,delta:n,value:e.props.value[n],setValue:function(t){return c.setDeltaValue(e.props.path,n,t,e.props.config)}});r.push(a.createElement("div",{key:n,className:"widget widget--"+t},i))}(n);return a.createElement("div",{className:"filter--values"},r)}var i=a.createElement(this.props.widget.component,{definition:this.props.widget,field:this.props.field,cardinality:this.props.cardinality,value:this.props.value,setDeltaValue:function(t,r){return c.setDeltaValue(e.props.path,t,r,e.props.config)}});return a.createElement("div",{className:"filter--values"},a.createElement("div",{className:"widget widget--"+t},i))}}}),t}(a.Component);p.propTypes={path:a.PropTypes.instanceOf(u.List).isRequired,value:a.PropTypes.instanceOf(u.List).isRequired,config:a.PropTypes.object.isRequired,field:a.PropTypes.object.isRequired,cardinality:a.PropTypes.number.isRequired,widget:a.PropTypes.object.isRequired},e.exports=p},function(e,t,r){"use strict";var n=function(e){return e&&e.__esModule?e["default"]:e},i=function(){function e(e,t){for(var r in t){var n=t[r];n.configurable=!0,n.value&&(n.writable=!0)}Object.defineProperties(e,t)}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)},s=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},a=n(r(11)),u=n(r(12)),c=n(r(9)),p=function(e){function t(){s(this,t),null!=e&&e.apply(this,arguments)}return o(t,e),i(t,{render:{value:function(){var e=this;if(!this.props.operator.options||!this.props.operator.options.component)return null;var t=a.createElement(this.props.operator.options.component,{definition:this.props.operator,field:this.props.field,options:this.props.options,setOption:function(t,r){return c.setOption(e.props.path,t,r,e.props.config)}});return a.createElement("div",{className:"filter--options"},t)}}}),t}(a.Component);p.propTypes={path:a.PropTypes.instanceOf(u.List).isRequired,options:a.PropTypes.instanceOf(u.Map).isRequired,config:a.PropTypes.object.isRequired,field:a.PropTypes.object.isRequired,operator:a.PropTypes.object.isRequired},e.exports=p},function(e,t,r){"use strict";function n(e,t,r){var n=a(e)?i:s;return t=o(t,r,3),n(e,t)}var i=r(30),o=r(26),s=r(31),a=r(28);e.exports=n},function(e){"use strict";function t(e,t){for(var r=-1,n=e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}e.exports=t},function(e,t,r){"use strict";function n(e,t,r){var n=typeof e;return"function"==n?"undefined"!=typeof t&&c(e)?a(e,t,r):e:null==e?u:"object"==n?i(e):"undefined"==typeof t?s(e+""):o(e+"",t)}var i=r(34),o=r(35),s=r(36),a=r(37),u=r(38),c=r(39);e.exports=n},function(e,t,r){"use strict";function n(e,t){var r=[];return i(e,function(e,n,i){r.push(t(e,n,i))}),r}var i=r(33);e.exports=n},function(e,t,r){"use strict";var n=r(40),i=r(41),o=r(42),s="[object Array]",a=Object.prototype,u=a.toString,c=i(c=Array.isArray)&&c,p=c||function(e){return o(e)&&n(e.length)&&u.call(e)==s||!1};e.exports=p},function(e){"use strict";var t=function(e,t,r,n,i,o,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,o,s,a],p=0;u=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return c[p++]}))}throw u.framesToPop=1,u}};e.exports=t},function(e){"use strict";function t(e,t){for(var r=-1,n=e.length,i=-1,o=[];++r<n;){var s=e[r];t(s,r,e)&&(o[++i]=s)}return o}e.exports=t},function(e,t,r){"use strict";function n(e,t){var r=[];return i(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r}var i=r(33);e.exports=n},function(e){"use strict";var t=function(e,t,r,n,i,o,s,a){if(!e){var u;if(void 0===t)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var c=[r,n,i,o,s,a],p=0;u=new Error("Invariant Violation: "+t.replace(/%s/g,function(){return c[p++]}))}throw u.framesToPop=1,u}};e.exports=t},function(e,t,r){"use strict";function n(e,t){var r=e?e.length:0;if(!o(r))return i(e,t);for(var n=-1,a=s(e);++n<r&&t(a[n],n,a)!==!1;);return e}var i=r(43),o=r(40),s=r(44);e.exports=n},function(e,t,r){"use strict";function n(e){var t=s(e),r=t.length;if(1==r){var n=t[0],a=e[n];if(o(a))return function(e){return null!=e&&e[n]===a&&u.call(e,n)}}for(var c=Array(r),p=Array(r);r--;)a=e[t[r]],c[r]=a,p[r]=o(a);return function(e){return i(e,t,c,p)}}var i=r(45),o=r(46),s=r(47),a=Object.prototype,u=a.hasOwnProperty;e.exports=n},function(e,t,r){"use strict";function n(e,t){return o(t)?function(r){return null!=r&&r[e]===t}:function(r){return null!=r&&i(t,r[e],null,!0)}}var i=r(48),o=r(46);e.exports=n},function(e){"use strict";function t(e){return function(t){return null==t?void 0:t[e]}}e.exports=t},function(e,t,r){"use strict";function n(e,t,r){if("function"!=typeof e)return i;if("undefined"==typeof t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 3:return function(r,n,i){return e.call(t,r,n,i)};case 4:return function(r,n,i,o){return e.call(t,r,n,i,o)};case 5:return function(r,n,i,o,s){return e.call(t,r,n,i,o,s)}}return function(){return e.apply(t,arguments)}}var i=r(38);e.exports=n},function(e){"use strict";function t(e){return e}e.exports=t},function(e,t,r){"use strict";function n(e){var t=!(s.funcNames?e.name:s.funcDecomp);if(!t){var r=c.call(e);s.funcNames||(t=!a.test(r)),t||(t=u.test(r)||o(e),i(e,t))}return t}var i=r(49),o=r(41),s=r(50),a=/^\s*function[ \n\r\t]+\w/,u=/\bthis\b/,c=Function.prototype.toString;e.exports=n},function(e){"use strict";function t(e){return"number"==typeof e&&e>-1&&e%1==0&&r>=e}var r=Math.pow(2,53)-1;e.exports=t},function(e,t,r){"use strict";function n(e){return null==e?!1:p.call(e)==s?l.test(c.call(e)):o(e)&&a.test(e)||!1}var i=r(51),o=r(42),s="[object Function]",a=/^\[object .+?Constructor\]$/,u=Object.prototype,c=Function.prototype.toString,p=u.toString,l=RegExp("^"+i(p).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=n},function(e){"use strict";function t(e){return e&&"object"==typeof e||!1}e.exports=t},function(e,t,r){"use strict";function n(e,t){return i(e,t,o)}var i=r(52),o=r(47);e.exports=n},function(e,t,r){"use strict";function n(e){return i(e)?e:Object(e)}var i=r(53);e.exports=n},function(e,t,r){"use strict";function n(e,t,r,n,o){var a=t.length;if(null==e)return!a;for(var u=-1,c=!o;++u<a;)if(c&&n[u]?r[u]!==e[t[u]]:!s.call(e,t[u]))return!1;for(u=-1;++u<a;){var p=t[u];if(c&&n[u])var l=s.call(e,p);else{var f=e[p],h=r[u];l=o?o(f,h,p):void 0,"undefined"==typeof l&&(l=i(h,f,o,!0))}if(!l)return!1}return!0}var i=r(48),o=Object.prototype,s=o.hasOwnProperty;e.exports=n},function(e,t,r){"use strict";

function n(e){return e===e&&(0===e?1/e>0:!i(e))}var i=r(53);e.exports=n},function(e,t,r){"use strict";var n=r(40),i=r(41),o=r(53),s=r(54),a=i(a=Object.keys)&&a,u=a?function(e){if(e)var t=e.constructor,r=e.length;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&r&&n(r)?s(e):o(e)?a(e):[]}:s;e.exports=u},function(e,t,r){"use strict";function n(e,t,r,o,s,a){if(e===t)return 0!==e||1/e==1/t;var u=typeof e,c=typeof t;return"function"!=u&&"object"!=u&&"function"!=c&&"object"!=c||null==e||null==t?e!==e&&t!==t:i(e,t,n,r,o,s,a)}var i=r(55);e.exports=n},function(e,t,r){"use strict";var n=r(38),i=r(56),o=i?function(e,t){return i.set(e,t),e}:n;e.exports=o},function(e,t,r){(function(t){"use strict";var n=r(41),i=/\bthis\b/,o=Object.prototype,s=(s=t.window)&&s.document,a=o.propertyIsEnumerable,u={};!function(){u.funcDecomp=!n(t.WinRTError)&&i.test(function(){return this}),u.funcNames="string"==typeof Function.name;try{u.dom=11===s.createDocumentFragment().nodeType}catch(e){u.dom=!1}try{u.nonEnumArgs=!a.call(arguments,1)}catch(e){u.nonEnumArgs=!0}}(0,0),e.exports=u}).call(t,function(){return this}())},function(e,t,r){"use strict";function n(e){return e=i(e),e&&s.test(e)?e.replace(o,"\\$&"):e}var i=r(57),o=/[.*+?^${}()|[\]\/\\]/g,s=RegExp(o.source);e.exports=n},function(e,t,r){"use strict";function n(e,t,r){for(var n=-1,o=i(e),s=r(e),a=s.length;++n<a;){var u=s[n];if(t(o[u],u,o)===!1)break}return e}var i=r(44);e.exports=n},function(e){"use strict";function t(e){var t=typeof e;return"function"==t||e&&"object"==t||!1}e.exports=t},function(e,t,r){"use strict";function n(e){for(var t=u(e),r=t.length,n=r&&e.length,p=n&&a(n)&&(o(e)||c.nonEnumArgs&&i(e)),f=-1,h=[];++f<r;){var d=t[f];(p&&s(d,n)||l.call(e,d))&&h.push(d)}return h}var i=r(58),o=r(28),s=r(59),a=r(40),u=r(60),c=r(50),p=Object.prototype,l=p.hasOwnProperty;e.exports=n},function(e,t,r){"use strict";function n(e,t,r,n,f,v,y){var g=a(e),m=a(t),b=p,_=p;g||(b=d.call(e),b==c?b=l:b!=l&&(g=u(e))),m||(_=d.call(t),_==c?_=l:_!=l&&(m=u(t)));var E=b==l,w=_==l,x=b==_;if(x&&!g&&!E)return o(e,t,b);var j=E&&h.call(e,"__wrapped__"),O=w&&h.call(t,"__wrapped__");if(j||O)return r(j?e.value():e,O?t.value():t,n,f,v,y);if(!x)return!1;v||(v=[]),y||(y=[]);for(var T=v.length;T--;)if(v[T]==e)return y[T]==t;v.push(e),y.push(t);var D=(g?i:s)(e,t,r,n,f,v,y);return v.pop(),y.pop(),D}var i=r(61),o=r(62),s=r(63),a=r(28),u=r(64),c="[object Arguments]",p="[object Array]",l="[object Object]",f=Object.prototype,h=f.hasOwnProperty,d=f.toString;e.exports=n},function(e,t,r){(function(t){"use strict";var n=r(41),i=n(i=t.WeakMap)&&i,o=i&&new i;e.exports=o}).call(t,function(){return this}())},function(e){"use strict";function t(e){return"string"==typeof e?e:null==e?"":e+""}e.exports=t},function(e,t,r){"use strict";function n(e){var t=o(e)?e.length:void 0;return i(t)&&u.call(e)==s||!1}var i=r(40),o=r(42),s="[object Arguments]",a=Object.prototype,u=a.toString;e.exports=n},function(e){"use strict";function t(e,t){return e=+e,t=null==t?r:t,e>-1&&e%1==0&&t>e}var r=Math.pow(2,53)-1;e.exports=t},function(e,t,r){"use strict";function n(e){if(null==e)return[];u(e)||(e=Object(e));var t=e.length;t=t&&a(t)&&(o(e)||c.nonEnumArgs&&i(e))&&t||0;for(var r=e.constructor,n=-1,p="function"==typeof r&&r.prototype===e,f=Array(t),h=t>0;++n<t;)f[n]=n+"";for(var d in e)h&&s(d,t)||"constructor"==d&&(p||!l.call(e,d))||f.push(d);return f}var i=r(58),o=r(28),s=r(59),a=r(40),u=r(53),c=r(50),p=Object.prototype,l=p.hasOwnProperty;e.exports=n},function(e){"use strict";function t(e,t,r,n,i,o,s){var a=-1,u=e.length,c=t.length,p=!0;if(u!=c&&!(i&&c>u))return!1;for(;p&&++a<u;){var l=e[a],f=t[a];if(p=void 0,n&&(p=i?n(f,l,a):n(l,f,a)),"undefined"==typeof p)if(i)for(var h=c;h--&&(f=t[h],!(p=l&&l===f||r(l,f,n,i,o,s))););else p=l&&l===f||r(l,f,n,i,o,s)}return!!p}e.exports=t},function(e){"use strict";function t(e,t,u){switch(u){case r:case n:return+e==+t;case i:return e.name==t.name&&e.message==t.message;case o:return e!=+e?t!=+t:0==e?1/e==1/t:e==+t;case s:case a:return e==t+""}return!1}var r="[object Boolean]",n="[object Date]",i="[object Error]",o="[object Number]",s="[object RegExp]",a="[object String]";e.exports=t},function(e,t,r){"use strict";function n(e,t,r,n,o,a,u){var c=i(e),p=c.length,l=i(t),f=l.length;if(p!=f&&!o)return!1;for(var h,d=-1;++d<p;){var v=c[d],y=s.call(t,v);if(y){var g=e[v],m=t[v];y=void 0,n&&(y=o?n(m,g,v):n(g,m,v)),"undefined"==typeof y&&(y=g&&g===m||r(g,m,n,o,a,u))}if(!y)return!1;h||(h="constructor"==v)}if(!h){var b=e.constructor,_=t.constructor;if(b!=_&&"constructor"in e&&"constructor"in t&&!("function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _))return!1}return!0}var i=r(47),o=Object.prototype,s=o.hasOwnProperty;e.exports=n},function(e,t,r){"use strict";function n(e){return o(e)&&i(e.length)&&R[C.call(e)]||!1}var i=r(40),o=r(42),s="[object Arguments]",a="[object Array]",u="[object Boolean]",c="[object Date]",p="[object Error]",l="[object Function]",f="[object Map]",h="[object Number]",d="[object Object]",v="[object RegExp]",y="[object Set]",g="[object String]",m="[object WeakMap]",b="[object ArrayBuffer]",_="[object Float32Array]",E="[object Float64Array]",w="[object Int8Array]",x="[object Int16Array]",j="[object Int32Array]",O="[object Uint8Array]",T="[object Uint8ClampedArray]",D="[object Uint16Array]",P="[object Uint32Array]",R={};R[_]=R[E]=R[w]=R[x]=R[j]=R[O]=R[T]=R[D]=R[P]=!0,R[s]=R[a]=R[b]=R[u]=R[c]=R[p]=R[l]=R[f]=R[h]=R[d]=R[v]=R[y]=R[g]=R[m]=!1;var L=Object.prototype,C=L.toString;e.exports=n}])});